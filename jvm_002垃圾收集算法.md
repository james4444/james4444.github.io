# jvm

## 垃圾收集

### 垃圾收集算法

* 标记-清除算法
标记出所有需要回收的对象，在标记完成后统一回收所有被标记的对象。
不足：
1. 效率问题，标记和清除的效率不高
2. 空间问题，标记清除之后产生大量的不连续的内存碎片，空间碎片过多可能会导致以后在程序运行的过程中，需要分配大对象时，无法找到足够的内存而不得不提前出发另一次垃圾回收操作

* 复制
将内存分为相等的两块，当一块内存用完了，将存活的对象复制到另一块内存上，清理已使用的空间。确定是内存浪费，只使用了一半的内存。
现代虚拟机都采用这种方式来回收新生代，将内存分成一个较大的eden和较小的survivor,默认8：1，当需要会收时，将eden和survivor中活着的对象移动到另一个survivor空间上。
缺点：如果存活的对象较多，效率就会降低

* 标记-整理
在标记-清除算法上做了改进，适用于老年代，清理时，不是直接对可回收对象进行清理，而是让所有存活的对象都向一端移动，然后直接清理掉端边界以外的内存